<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>


  <div class="container">
    <div class="header">
      <h1>Gestión de Clientes</h1>
      <p>Administra tu base de datos de clientes de manera eficiente</p>
    </div>

    <div class="content">
      <div class="search-container">
        <div class="search-wrapper">
          <input type="text" class="search-input" placeholder="Buscar cliente por nombre, ID o teléfono..."
            [(ngModel)]="filtro" (input)="onFilterChange()">
          <svg class="search-icon" viewBox="0 0 24 24">
            <path
              d="M21.53 20.47l-3.66-3.66C19.195 15.24 20 13.214 20 11c0-4.97-4.03-9-9-9s-9 4.03-9 9 4.03 9 9 9c2.215 0 4.24-.804 5.808-2.13l3.66 3.66c.147.146.34.22.53.22s.385-.073.53-.22c.295-.293.295-.767.002-1.06zM3.5 11c0-4.135 3.365-7.5 7.5-7.5s7.5 3.365 7.5 7.5-3.365 7.5-7.5 7.5-7.5-3.365-7.5-7.5z" />
          </svg>
        </div>
        <button class="btn btn-primary" (click)="abrirModal()">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
            <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z" />
          </svg>
          Nuevo Cliente
        </button>
      </div>

      <div class="table-container">
        <table class="table">
          <thead>
            <tr>
              <th>Nombre</th>
              <th>Identificación</th>
              <th>Teléfono</th>
              <th>Dirección</th>
              <th>Estado</th>
              <th>Acciones</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let cliente of paginatedClients">
              <td>{{ cliente.nombre }}</td>
              <td>{{ cliente.dni }}</td>
              <td>{{ cliente.telefono }}</td>
              <td>{{ cliente.direccion }}</td>
              <td>
                <span class="status-badge" [ngClass]="getStatusClass(cliente.activo)">
                  {{ getClientStatus(cliente.activo) }}
                </span>
              </td>
              <td class="actions">
                <button class="btn btn-success btn-sm" (click)="abrirModal(cliente)" title="Editar pago">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M12 20h9M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z" />
                  </svg>

                </button>
                <button class="btn btn-danger btn-sm" (click)="eliminarCliente(cliente.id)" title="Eliminar pago">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M3 6h18M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2" />
                  </svg>

                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="pagination" *ngIf="totalPages > 1">
        <button (click)="previousPage()" [disabled]="currentPage === 1">&laquo;</button>
        <button *ngFor="let page of getPageRange()" (click)="changePage(page)" [class.active]="currentPage === page">{{
          page }}</button>
        <button (click)="nextPage()" [disabled]="currentPage === totalPages">&raquo;</button>
      </div>
      <p>{{ getPaginationInfo() }}</p>
    </div>
  </div>

  <!-- Modal -->
  <div class="modal" [ngClass]="{'show': modalAbierto}" *ngIf="modalAbierto">
    <div class="modal-content">
      <div class="modal-header">
        <h2>{{ modoEdicion ? 'Editar Cliente' : 'Nuevo Cliente' }}</h2>
      </div>
      <form (ngSubmit)="guardarCliente()" #clientForm="ngForm">
        <div class="form-group">
          <label for="nombre">Nombre del Cliente</label>
          <input type="text" id="nombre" name="nombre" [(ngModel)]="clienteSeleccionado.nombre" required>
        </div>
        <div class="form-group">
          <label for="dni">Identificación</label>
          <input type="text" id="dni" name="dni" [(ngModel)]="clienteSeleccionado.dni" required>
        </div>
        <div class="form-group">
          <label for="telefono">Teléfono</label>
          <input type="tel" id="telefono" name="telefono" [(ngModel)]="clienteSeleccionado.telefono" required>
        </div>
        <div class="form-group">
          <label for="direccion">Dirección</label>
          <input type="text" id="direccion" name="direccion" [(ngModel)]="clienteSeleccionado.direccion" required>
        </div>
        <div class="form-group">
          <label for="activo">Estado</label>
          <select id="activo" name="activo" [(ngModel)]="clienteSeleccionado.activo" required>
            <option [value]="true">Activo</option>
            <option [value]="false">Inactivo</option>
          </select>
        </div>
        <div class="modal-actions">
          <button type="button" class="btn btn-primary">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M20 6L9 17l-5-5" />
            </svg>
            Guardar</button>
          <button type="button" class="btn btn-secondary" (click)="cerrarModal()">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M18 6L6 18M6 6l12 12" />
            </svg>
            Cancelar</button>
        </div>
      </form>
    </div>
  </div>

</body>

</html>